# Production Environment Configuration for Blacklake

# Server Configuration
APP_HOST=0.0.0.0
APP_PORT=8080
RUST_LOG=info,blacklake=warn

# Database Configuration
DATABASE_URL=postgres://blacklake:${POSTGRES_PASSWORD}@postgres:5432/blacklake
DATABASE_POOL_SIZE=20
DATABASE_TIMEOUT=30
DATABASE_MAX_LIFETIME=3600

# S3 / MinIO Configuration
S3_ENDPOINT=https://s3.amazonaws.com
S3_REGION=us-east-1
S3_BUCKET=blacklake-prod
S3_ACCESS_KEY=${AWS_ACCESS_KEY_ID}
S3_SECRET_KEY=${AWS_SECRET_ACCESS_KEY}
S3_FORCE_PATH_STYLE=false
S3_RETRY_ATTEMPTS=3
S3_RETRY_INITIAL_DELAY=100
S3_RETRY_MAX_DELAY=30000

# Authentication Configuration
OIDC_ISSUER=https://auth.yourdomain.com/realms/blacklake
OIDC_AUDIENCE=blacklake
OIDC_JWKS_CACHE_TTL=3600

# Rate Limiting Configuration
RATE_LIMIT_RPM=1000
RATE_LIMIT_BURST=100
RATE_LIMIT_PER_USER=5000
RATE_LIMIT_PER_IP=2000

# Quota Configuration
DEFAULT_REPO_MAX_SIZE=10737418240  # 10GB
DEFAULT_REPO_MAX_FILES=10000
DEFAULT_REPO_MAX_COMMITS=1000
DEFAULT_USER_MAX_REPOS=10
DEFAULT_USER_MAX_TOTAL_SIZE=107374182400  # 100GB

# Security Configuration
ALLOWED_ORIGINS=https://yourdomain.com,https://app.yourdomain.com
CORS_MAX_AGE=86400
TRUSTED_PROXIES=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16

# Monitoring Configuration
METRICS_ENABLED=true
TRACING_ENABLED=true
JAEGER_ENDPOINT=http://jaeger:14268/api/traces

# Job Processing Configuration
JOB_WORKER_COUNT=5
JOB_QUEUE_SIZE=1000
JOB_TIMEOUT=300

# File Processing Configuration
MAX_FILE_SIZE=1073741824  # 1GB
ALLOWED_CONTENT_TYPES=text/plain,text/csv,application/json,application/parquet,application/octet-stream
VIRUS_SCAN_ENABLED=true
VIRUS_SCAN_TIMEOUT=30

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=blacklake-backups

# Alerting Configuration
ALERT_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
ALERT_EMAIL_FROM=alerts@yourdomain.com
ALERT_EMAIL_TO=admin@yourdomain.com

# Feature Flags
ENABLE_RDF_GENERATION=true
ENABLE_METADATA_INDEXING=true
ENABLE_LINEAGE_TRACKING=true
ENABLE_QUOTA_ENFORCEMENT=true
ENABLE_RATE_LIMITING=true
ENABLE_VIRUS_SCANNING=true

# Development/Testing (set to false in production)
DEBUG_MODE=false
MOCK_AUTH=false
SKIP_QUOTA_CHECKS=false
